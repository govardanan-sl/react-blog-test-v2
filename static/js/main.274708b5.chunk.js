(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[0],{21:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){},36:function(e,t,s){"use strict";s.r(t);var r=s(1),c=s.n(r),n=s(22),o=s.n(n),a=(s(28),s(29),s(2)),i=s(19),l=s(10),j=s(11),d=s(13),h=s(12),u=s(0),b=Object(r.createContext)(),O=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={isLoggedIn:!1,profile_id:null,accessToken:null},e.LoggedIn=function(t){e.setState({isLoggedIn:!0,profile_id:t})},e.Loggout=function(){e.setState({isLoggedIn:!1,profile_id:null,accessToken:null})},e.SetAccessToken=function(t,s){e.setState({isLoggedIn:!0,profile_id:s,accessToken:t})},e}return Object(j.a)(s,[{key:"render",value:function(){return Object(u.jsx)(b.Provider,{value:Object(i.a)(Object(i.a)({},this.state),{},{LoggedIn:this.LoggedIn,Loggout:this.Loggout,SetAccessToken:this.SetAccessToken}),children:this.props.children})}}]),s}(r.Component),p=function(){var e=Object(r.useContext)(b),t=e.profile_id,s=e.isLoggedIn,c=e.Loggout;return Object(u.jsxs)("nav",{className:"navbar",children:[Object(u.jsx)(a.b,{to:"/react-blog-test-v2",children:Object(u.jsx)("h1",{children:"The Social Media App"})}),Object(u.jsxs)("div",{className:"links",children:[Object(u.jsx)(a.b,{to:"/react-blog-test-v2",children:"Home"}),Object(u.jsx)(a.b,{to:"/profile",children:"Profile"}),Object(u.jsx)(a.b,{to:"/",children:"About"}),s&&Object(u.jsx)(a.b,{to:"/create",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"New Post"}),!s&&Object(u.jsx)(a.b,{to:"/login",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"Login"}),t&&Object(u.jsx)(a.b,{to:"#",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},onClick:c,children:"Logout"})]})]})},x=function(e){var t=e.posts,s=e.title;return Object(u.jsxs)("div",{className:"post-list",children:[Object(u.jsx)("h2",{children:s}),t.map((function(e){return Object(u.jsx)(a.b,{to:"/posts/".concat(e.id),children:Object(u.jsxs)("div",{className:"post-preview",children:[Object(u.jsx)("h2",{children:e.title}),Object(u.jsx)("p",{children:e.body}),Object(u.jsxs)("p",{children:["by ",Object(u.jsx)(a.b,{to:"/profile/".concat(e.author_id),className:"link-highlight",children:e.author})]})]})},e.id)}))]})},g=s(4),f=function(e,t){var s=Object(r.useState)(null),c=Object(g.a)(s,2),n=c[0],o=c[1],a=Object(r.useState)(!0),i=Object(g.a)(a,2),l=i[0],j=i[1],d=Object(r.useState)(null),h=Object(g.a)(d,2),u=h[0],b=h[1];return Object(r.useEffect)((function(){var s=new AbortController,r=t,c=t.headers;return c.append("signal",s.signal),r.headers=c,fetch(e,r).then((function(e){if(!e.ok)throw Error("Could not Fetch data");return e.json()})).then((function(e){o(e),j(!1),b(null)})).catch((function(e){"AbortError"===e.name?console.log("Fetch Aborted"):(console.log(e.message),b(e.message))})),function(){return s.abort()}}),[e,t]),{data:n,isLoading:l,isError:u}},m=function(){var e=f("https://backend-react-json-server.herokuapp.com/posts",{headers:new Headers}),t=e.data,s=e.isLoading,r=e.isError;return Object(u.jsxs)("div",{className:"Home",children:[Object(u.jsxs)("div",{className:"moved-out",style:{marginBottom:"1rem"},children:[Object(u.jsx)("h2",{style:{color:"#ff003cf0",margin:"1rem"},children:"This Page is Depreciated"}),Object(u.jsx)(a.b,{to:"/react-blog-test-v2",className:"link-highlight",children:"Click Here "}),"to Move to New Home Page"]}),!r&&s&&Object(u.jsx)("div",{children:"Loading...."}),r&&Object(u.jsx)("div",{children:Object(u.jsx)("h2",{style:{color:"#ff003cf0"},children:r})}),t&&Object(u.jsx)(x,{posts:t,title:"All Posts"}),t&&Object(u.jsx)(x,{posts:t.filter((function(e){return"bruce"===e.author})),title:"My Posts"})]})},v=s(3),k=function(){var e=Object(r.useContext)(b),t=e.profile_id,s=e.accessToken,c=Object(r.useState)(""),n=Object(g.a)(c,2),o=n[0],a=n[1],i=Object(r.useState)(""),l=Object(g.a)(i,2),j=l[0],d=l[1],h=Object(r.useState)(""),O=Object(g.a)(h,2),p=O[0],x=O[1],f=Object(r.useState)(!1),m=Object(g.a)(f,2),k=m[0],y=m[1],w=Object(v.f)(),N=Object(r.useRef)();Object(r.useEffect)((function(){N.current.focus()}),[N]);return Object(u.jsxs)("div",{className:"create",children:[Object(u.jsx)("h2",{children:"New Post"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={title:o,body:j,author:p,author_id:t};y(!0);var c=new Headers;c.append("Authorization","Bearer "+s),c.append("Content-Type","application/json");var n={method:"POST",Authorization:"Bearer "+s,headers:c,body:JSON.stringify(r)};fetch("https://backend-react-json-server-auth.herokuapp.com/posts",n).then((function(e){if(201!==e.status)throw Error(e.statusText);console.log("Posted"),y(!1),w.push("/react-blog-test-v2")})).catch((function(e){console.log(e.message),y(!1)}))},children:[Object(u.jsx)("label",{children:"Post Title : "}),Object(u.jsx)("input",{type:"text",required:!0,value:o,onChange:function(e){return a(e.target.value)},ref:N}),Object(u.jsx)("label",{children:"Post Body : "}),Object(u.jsx)("textarea",{value:j,onChange:function(e){return d(e.target.value)},required:!0}),Object(u.jsx)("label",{children:"Author Name : "}),Object(u.jsx)("input",{value:p,onChange:function(e){return x(e.target.value)},type:"text",required:!0}),t&&!k&&Object(u.jsx)("button",{type:"submit",children:"Post"}),k&&Object(u.jsx)("button",{disabled:!0,children:"Please Wait..."}),!t&&Object(u.jsx)("h2",{className:"error",children:"Login to Post"})]})]})},y=function(){var e=Object(v.g)().id,t=f("https://backend-react-json-server.herokuapp.com/posts/"+e,{method:"GET",redirect:"follow"}),s=t.data,r=t.isError,c=t.isLoading,n=Object(v.f)();return Object(u.jsxs)("div",{className:"post-details",children:[!r&&c&&Object(u.jsx)("div",{children:"Loading Post..."}),r&&Object(u.jsxs)("div",{children:[r,"!!",Object(u.jsx)("br",{}),"Post not found"]}),s&&Object(u.jsxs)("article",{children:[Object(u.jsx)("h2",{children:s.title}),Object(u.jsxs)("p",{children:["posted by ",Object(u.jsx)(a.b,{className:"link-highlight",to:"/profile/".concat(s.author_id),children:s.author})]}),Object(u.jsx)("div",{children:s.body}),Object(u.jsx)("button",{onClick:function(){fetch("https://backend-react-json-server.herokuapp.com/posts/"+s.id,{method:"DELETE"}).then((function(){n.push("/react-blog-test-v2")})).catch((function(e){console.log(e)}))},children:"Delete"})]})]})},w=function(){return Object(u.jsxs)("div",{className:"not-found",children:[Object(u.jsx)("h2",{children:"Broken Link"}),Object(u.jsx)("p",{children:"The Page you requested not found"}),Object(u.jsx)(a.b,{to:"/react-blog-test-v2",children:"Home"})]})};var N=function(){var e=Object(r.useContext)(b),t=e.profile_id,s=e.accessToken,c=new Headers;c.append("Authorization","Bearer "+s);var n=f("https://backend-react-json-server-auth.herokuapp.com/profile/"+t,{method:"GET",redirect:"follow",headers:c}),o=n.data,i=n.isError,l=n.isLoading;return Object(u.jsxs)("div",{children:[!t&&Object(u.jsx)("h1",{children:Object(u.jsx)(a.b,{to:"/login",className:"link-highlight",children:"Please Login"})}),t&&i&&Object(u.jsx)("h2",{children:"Error Occured"}),t&&l&&Object(u.jsx)("h2",{children:"Loading!!..."}),Object(u.jsx)("h2",{children:"Profile"}),t&&Object(u.jsxs)("div",{className:"profile-container",children:[Object(u.jsxs)("p",{children:[" Name : ",!i&&o&&o.name]}),Object(u.jsx)("p",{children:" Status : "})]})]})},S=function(){var e=Object(v.g)().id,t=Object(r.useContext)(b).accessToken,s=new Headers;s.append("Authorization","Bearer "+t);var c=f("https://backend-react-json-server-auth.herokuapp.com/profile/"+e,{method:"GET",redirect:"follow",headers:s}),n=c.data,o=c.isError,a=c.isLoading;return Object(u.jsxs)("div",{className:"profile-container",children:[t&&!o&&a&&Object(u.jsx)("div",{children:"Loading Profile..."}),t&&o&&Object(u.jsxs)("div",{children:[o,"!!",Object(u.jsx)("br",{}),"Profile not found"]}),n&&Object(u.jsxs)("div",{className:"profile-data",children:[Object(u.jsxs)("h2",{children:["Name : ",n.name]}),Object(u.jsxs)("p",{children:["Email : ",n.email]})]}),!t&&Object(u.jsx)("h1",{className:"error",children:"Please Login"})]})},L=s.p+"static/media/login.103b30a1.svg",C=(s(21),function(){var e=Object(r.useContext)(b),t=e.isLoggedIn,s=e.SetAccessToken,c=Object(r.useState)(""),n=Object(g.a)(c,2),o=n[0],i=n[1],l=Object(r.useState)(""),j=Object(g.a)(l,2),d=j[0],h=j[1],O=Object(r.useState)(!1),p=Object(g.a)(O,2),x=p[0],f=p[1],m=Object(r.useState)(!1),v=Object(g.a)(m,2),k=v[0],y=v[1];return Object(u.jsxs)("div",{className:"base-container",children:[Object(u.jsx)("div",{className:"header",children:"Login"}),!t&&Object(u.jsxs)("div",{className:"content",children:[k&&Object(u.jsx)("h2",{className:"error",children:"Invalid Username or Password"}),Object(u.jsx)("div",{className:"image",children:Object(u.jsx)("img",{src:L,alt:"just a decoration"})}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:o,password:d};f(!0);var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("https://backend-react-json-server-auth.herokuapp.com/auth/login",r).then((function(e){if(401===e.status&&y(!0),200!==e.status)throw Error(e.statusText);return console.log("Verified successfully"),e.json()})).then((function(e){s(e.access_token,e.id),console.log("Logged In successfully")})).catch((function(e){console.log(e.message),f(!1)}))},children:[Object(u.jsxs)("div",{className:"form",children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email"}),Object(u.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"password",value:d,onChange:function(e){return h(e.target.value)}})]})]}),!t&&!x&&Object(u.jsx)("button",{type:"submit",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px",width:"7rem",height:"3rem"},children:"Login"})]}),Object(u.jsx)(a.b,{to:"/register",style:{color:"#333",marginTop:"1rem",fontSize:"1.2rem"},children:"Don't Have an account?? Register!!"})]}),t&&Object(u.jsx)("h2",{style:{margin:"1rem"},children:"You are already Logged In"})]})}),T=function(){var e=Object(r.useContext)(b),t=e.isLoggedIn,s=e.SetAccessToken,c=Object(r.useState)(""),n=Object(g.a)(c,2),o=n[0],a=n[1],i=Object(r.useState)(""),l=Object(g.a)(i,2),j=l[0],d=l[1],h=Object(r.useState)(""),O=Object(g.a)(h,2),p=O[0],x=O[1],f=Object(r.useState)(!1),m=Object(g.a)(f,2),k=m[0],y=m[1],w=Object(v.f)();return Object(u.jsxs)("div",{className:"base-container",children:[Object(u.jsx)("div",{className:"header",children:Object(u.jsx)("h2",{children:"Register"})}),!t&&Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("div",{className:"image",children:Object(u.jsx)("img",{src:L,alt:"just a decoration"})}),Object(u.jsxs)("form",{onSubmit:function(e){var t=!1,r=null;e.preventDefault();var c={email:j,password:p},n={name:o,email:j};y(!0);var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},i="https://backend-react-json-server-auth.herokuapp.com/auth/register";fetch(i,a).then((function(e){if(200!==e.status)throw t=!0,Error(e.statusText);return console.log("New User Added"),e.json()})).then((function(e){if(r=e.access_token,!t){var c=new Headers;c.append("Authorization","Bearer "+r),c.append("Content-Type","application/json"),a={method:"POST",headers:c,body:JSON.stringify(n)},i="https://backend-react-json-server-auth.herokuapp.com/profile/",fetch(i,a).then((function(e){if(201!==e.status)throw Error(e.statusText);return console.log("New Profile Added"),y(!1),e.json()})).then((function(e){s(r,e.id),console.log("Registered Successfully"),w.push("/react-blog-test-v2")})).catch((function(e){console.log(e.message),y(!1)}))}})).catch((function(e){console.log(e.message),y(!1)}))},children:[Object(u.jsxs)("div",{className:"form",children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"username",children:"Username"}),Object(u.jsx)("input",{type:"text",name:"username",placeholder:"username",value:o,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"email",children:"Email"}),Object(u.jsx)("input",{type:"email",name:"email",placeholder:"email",value:j,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsx)("label",{htmlFor:"password",children:"Password"}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"password",value:p,onChange:function(e){return x(e.target.value)},required:!0})]})]}),!t&&!k&&Object(u.jsx)("button",{type:"submit",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px",width:"7rem",height:"3rem",borderBlockColor:"pinks"},children:"Register"})]})]}),t&&Object(u.jsx)("h1",{children:"You already have an account!! You Are Logged In"})]})},E=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).abortController=new window.AbortController,r.state={posts:[],isLoading:!0,isError:null},r}return Object(j.a)(s,[{key:"fetchPosts",value:function(){var e=this,t=this.context.accessToken,s=new Headers;s.append("Authorization","Bearer "+t),s.append("signal",this.abortController.signal),fetch("https://backend-react-json-server-auth.herokuapp.com/posts",{method:"GET",headers:s,redirect:"follow"}).then((function(e){if(!e.ok)throw Error("Could not Fetch data");return e.json()})).then((function(t){e.setState({posts:t}),e.setState({isLoading:!1}),e.setState({isError:!1})})).catch((function(t){"AbortError"===t.name?console.log("Fetch Aborted"):(console.log(t.message),e.setState({isError:t.message}))}))}},{key:"componentDidMount",value:function(){this.context.accessToken&&this.fetchPosts()}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){var e=this.context,t=e.isLoggedIn,s=e.profile_id,r=e.accessToken;return Object(u.jsxs)("div",{className:"home",children:[t&&Object(u.jsx)("h2",{children:"Welcome Back"}),Object(u.jsx)("h1",{children:"Home Page"}),!this.state.isError&&this.state.isLoading&&r&&Object(u.jsx)("div",{children:"Loading...."}),this.state.isError&&Object(u.jsx)("div",{children:Object(u.jsx)("h2",{style:{color:"#ff003cf0"},children:this.state.isError})}),this.state.posts&&Object(u.jsx)(x,{posts:this.state.posts,title:"All Posts"}),s&&this.state.posts&&Object(u.jsx)(x,{posts:this.state.posts.filter((function(e){return e.author_id===s})),title:"My Posts"}),!r&&Object(u.jsx)("h1",{className:"error",children:"Please Login"})]})}}]),s}(r.Component);E.contextType=b;var P=E,A=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={hasError:!1},r}return Object(j.a)(s,[{key:"componentDidCatch",value:function(e,t){console.log(e),console.log(t)}},{key:"render",value:function(){return this.state.hasError?Object(u.jsx)("h1",{children:"Something Went Wrong"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),s}(r.Component);var I=function(){return Object(u.jsx)(a.a,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(O,{children:[Object(u.jsx)(p,{}),Object(u.jsx)("div",{className:"content",children:Object(u.jsx)(A,{children:Object(u.jsxs)(v.c,{children:[Object(u.jsx)(v.a,{exact:!0,path:"/",children:Object(u.jsx)(m,{})}),Object(u.jsx)(v.a,{exact:!0,path:"/react-blog-test-v2",children:Object(u.jsx)(P,{})}),Object(u.jsx)(v.a,{path:"/login",children:Object(u.jsx)(C,{})}),Object(u.jsx)(v.a,{path:"/register",children:Object(u.jsx)(T,{})}),Object(u.jsx)(v.a,{path:"/create",children:Object(u.jsx)(k,{})}),Object(u.jsx)(v.a,{exact:!0,path:"/profile/:id",children:Object(u.jsx)(S,{})}),Object(u.jsx)(v.a,{exact:!0,path:"/profile",children:Object(u.jsx)(N,{})}),Object(u.jsx)(v.a,{path:"/posts/:id",children:Object(u.jsx)(y,{})}),Object(u.jsx)(v.a,{path:"/new-home",children:Object(u.jsx)(P,{})}),Object(u.jsx)(v.a,{path:"*",children:Object(u.jsx)(w,{})})]})})})]})})})},F=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,37)).then((function(t){var s=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,o=t.getTTFB;s(e),r(e),c(e),n(e),o(e)}))};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(I,{})}),document.getElementById("root")),F()}},[[36,1,2]]]);
//# sourceMappingURL=main.274708b5.chunk.js.map