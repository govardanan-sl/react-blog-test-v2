(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[0],{21:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){},36:function(e,t,s){"use strict";s.r(t);var r=s(1),c=s.n(r),n=s(22),o=s.n(n),i=(s(28),s(29),s(3)),a=s(19),l=s(10),j=s(11),d=s(13),h=s(12),b=s(0),u=Object(r.createContext)(),O=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={isLoggedIn:!0,profile_id:1},e.LoggedIn=function(t){e.setState({isLoggedIn:!0,profile_id:t})},e.Loggout=function(){e.setState({isLoggedIn:!1,profile_id:null})},e}return Object(j.a)(s,[{key:"render",value:function(){return Object(b.jsx)(u.Provider,{value:Object(a.a)(Object(a.a)({},this.state),{},{LoggedIn:this.LoggedIn,Loggout:this.Loggout}),children:this.props.children})}}]),s}(r.Component),p=function(){var e=Object(r.useContext)(u),t=e.profile_id,s=e.isLoggedIn,c=e.Loggout;return Object(b.jsxs)("nav",{className:"navbar",children:[Object(b.jsx)(i.b,{to:"/react-blog-test-v2",children:Object(b.jsx)("h1",{children:"The Social Media App"})}),Object(b.jsxs)("div",{className:"links",children:[Object(b.jsx)(i.b,{to:"/react-blog-test-v2",children:"Home"}),Object(b.jsx)(i.b,{to:"/profile",children:"Profile"}),Object(b.jsx)(i.b,{to:"/",children:"About"}),s&&Object(b.jsx)(i.b,{to:"/create",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"New Post"}),!s&&Object(b.jsx)(i.b,{to:"/login",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"Login"}),t&&Object(b.jsx)(i.b,{to:"#",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},onClick:c,children:"Logout"})]})]})},x=function(e){var t=e.posts,s=e.title;return Object(b.jsxs)("div",{className:"post-list",children:[Object(b.jsx)("h2",{children:s}),t.map((function(e){return Object(b.jsx)(i.b,{to:"/posts/".concat(e.id),children:Object(b.jsxs)("div",{className:"post-preview",children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsx)("p",{children:e.body}),Object(b.jsxs)("p",{children:["by ",Object(b.jsx)(i.b,{to:"/profile/".concat(e.author_id),className:"link-highlight",children:e.author})]})]})},e.id)}))]})},f=s(5),m=function(e,t){var s=Object(r.useState)(null),c=Object(f.a)(s,2),n=c[0],o=c[1],i=Object(r.useState)(!0),a=Object(f.a)(i,2),l=a[0],j=a[1],d=Object(r.useState)(null),h=Object(f.a)(d,2),b=h[0],u=h[1];return Object(r.useEffect)((function(){var t=new AbortController;return fetch(e,{signal:t.signal},{method:"GET",redirect:"follow"}).then((function(e){if(!e.ok)throw Error("Could not Fetch data");return e.json()})).then((function(e){o(e),j(!1),u(null)})).catch((function(e){"AbortError"===e.name?console.log("Fetch Aborted"):(console.log(e.message),u(e.message))})),function(){return t.abort()}}),[e,t]),{data:n,isLoading:l,isError:b}},g=function(){var e=m("https://backend-react-json-server.herokuapp.com/posts"),t=e.data,s=e.isLoading,r=e.isError;return Object(b.jsxs)("div",{className:"Home",children:[!r&&s&&Object(b.jsx)("div",{children:"Loading...."}),r&&Object(b.jsx)("div",{children:Object(b.jsx)("h2",{style:{color:"#ff003cf0"},children:r})}),t&&Object(b.jsx)(x,{posts:t,title:"All Posts"}),t&&Object(b.jsx)(x,{posts:t.filter((function(e){return"bruce"===e.author})),title:"My Posts"})]})},v=s(2),k=function(){var e=Object(r.useContext)(u).profile_id,t=Object(r.useState)(""),s=Object(f.a)(t,2),c=s[0],n=s[1],o=Object(r.useState)(""),i=Object(f.a)(o,2),a=i[0],l=i[1],j=Object(r.useState)(""),d=Object(f.a)(j,2),h=d[0],O=d[1],p=Object(r.useState)(!1),x=Object(f.a)(p,2),m=x[0],g=x[1],k=Object(v.f)(),y=Object(r.useRef)();Object(r.useEffect)((function(){y.current.focus()}),[]);return Object(b.jsxs)("div",{className:"create",children:[Object(b.jsx)("h2",{children:"New Post"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var s={title:c,body:a,author:h,author_id:e};g(!0);var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};fetch("https://backend-react-json-server.herokuapp.com/posts",r).then((function(e){if(201!==e.status)throw Error(e.statusText);console.log("Posted"),g(!1),k.push("/react-blog-test-v2")})).catch((function(e){console.log(e.message),g(!1)}))},children:[Object(b.jsx)("label",{children:"Post Title : "}),Object(b.jsx)("input",{type:"text",required:!0,value:c,onChange:function(e){return n(e.target.value)},ref:y}),Object(b.jsx)("label",{children:"Post Body : "}),Object(b.jsx)("textarea",{value:a,onChange:function(e){return l(e.target.value)},required:!0}),Object(b.jsx)("label",{children:"Author Name : "}),Object(b.jsx)("input",{value:h,onChange:function(e){return O(e.target.value)},type:"text",required:!0}),!m&&Object(b.jsx)("button",{type:"submit",children:"Post"}),m&&Object(b.jsx)("button",{disabled:!0,children:"Please Wait..."})]})]})},y=function(){var e=Object(v.g)().id,t=m("https://backend-react-json-server.herokuapp.com/posts/"+e),s=t.data,r=t.isError,c=t.isLoading,n=Object(v.f)();return Object(b.jsxs)("div",{className:"post-details",children:[!r&&c&&Object(b.jsx)("div",{children:"Loading Post..."}),r&&Object(b.jsxs)("div",{children:[r,"!!",Object(b.jsx)("br",{}),"Post not found"]}),s&&Object(b.jsxs)("article",{children:[Object(b.jsx)("h2",{children:s.title}),Object(b.jsxs)("p",{children:["posted by ",Object(b.jsx)(i.b,{className:"link-highlight",to:"/profile/".concat(s.author_id),children:s.author})]}),Object(b.jsx)("div",{children:s.body}),Object(b.jsx)("button",{onClick:function(){fetch("https://backend-react-json-server.herokuapp.com/posts/"+s.id,{method:"DELETE"}).then((function(){n.push("/react-blog-test-v2")})).catch((function(e){console.log(e)}))},children:"Delete"})]})]})},N=function(){return Object(b.jsxs)("div",{className:"not-found",children:[Object(b.jsx)("h2",{children:"Broken Link"}),Object(b.jsx)("p",{children:"The Page you requested not found"}),Object(b.jsx)(i.b,{to:"/react-blog-test-v2",children:"Home"})]})};var C=function(){var e=Object(r.useContext)(u),t=m("https://backend-react-json-server.herokuapp.com/profile/"+e.profile_id),s=t.data,c=t.isError,n=t.isLoading;return Object(b.jsxs)("div",{children:[c&&Object(b.jsx)("h2",{children:"Error Occured"}),n&&Object(b.jsx)("h2",{children:"Loading!!..."}),Object(b.jsx)("h2",{children:"Profile"}),Object(b.jsxs)("div",{className:"profile-container",children:[Object(b.jsxs)("p",{children:[" Name : ",!c&&s&&s.name]}),Object(b.jsx)("p",{children:" Status : "})]})]})},w=function(){var e=Object(v.g)().id,t=m("https://backend-react-json-server.herokuapp.com/profile/"+e),s=t.data,r=t.isError,c=t.isLoading;return Object(b.jsxs)("div",{className:"profile-container",children:[!r&&c&&Object(b.jsx)("div",{children:"Loading Profile..."}),r&&Object(b.jsxs)("div",{children:[r,"!!",Object(b.jsx)("br",{}),"Profile not found"]}),s&&Object(b.jsxs)("div",{className:"profile-data",children:[Object(b.jsxs)("h2",{children:["Name : ",s.name]}),Object(b.jsxs)("p",{children:["Email : ",s.email]})]})]})},L=s.p+"static/media/login.103b30a1.svg",E=(s(21),function(){var e=Object(r.useContext)(u).Loggout;return Object(b.jsxs)("div",{className:"base-container",children:[Object(b.jsx)("div",{className:"header",children:"Login"}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("div",{className:"image",children:Object(b.jsx)("img",{src:L,alt:"just a decoration"})}),Object(b.jsxs)("div",{className:"form",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"username",children:"Username"}),Object(b.jsx)("input",{type:"text",name:"username",placeholder:"username"})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password"})]})]}),Object(b.jsx)("button",{type:"button",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px",width:"7rem",height:"3rem",marginLeft:"6rem"},onClick:e,children:"Login"})]})]})}),S=function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),s=t[0],c=t[1],n=Object(r.useState)(""),o=Object(f.a)(n,2),i=o[0],a=o[1],l=Object(r.useState)(""),j=Object(f.a)(l,2),d=j[0],h=j[1],u=Object(r.useState)(!1),O=Object(f.a)(u,2),p=O[0],x=O[1],m=Object(v.f)();return Object(b.jsxs)("div",{className:"base-container",children:[Object(b.jsx)("div",{className:"header",children:Object(b.jsx)("h2",{children:"Register"})}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("div",{className:"image",children:Object(b.jsx)("img",{src:L,alt:"just a decoration"})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:s,email:i};x(!0);var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("https://backend-react-json-server.herokuapp.com/profile/",r).then((function(e){if(201!==e.status)throw Error(e.statusText);console.log("New User Added"),x(!1),m.push("/react-blog-test-v2")})).catch((function(e){console.log(e.message),x(!1)}))},children:[Object(b.jsxs)("div",{className:"form",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"username",children:"Username"}),Object(b.jsx)("input",{type:"text",name:"username",placeholder:"username",value:s,onChange:function(e){return c(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"email",name:"email",placeholder:"email",value:i,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password",value:d,onChange:function(e){return h(e.target.value)},required:!0})]})]}),!p&&Object(b.jsx)("button",{type:"submit",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px",width:"7rem",height:"3rem",borderBlockColor:"pinks"},children:"Register"})]})]})]})},P=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).abortController=new window.AbortController,r.state={posts:[],isLoading:!0,isError:null},r}return Object(j.a)(s,[{key:"fetchPosts",value:function(){var e=this;fetch("https://backend-react-json-server.herokuapp.com/posts",{signal:this.abortController.signal},{method:"GET",redirect:"follow"}).then((function(e){if(!e.ok)throw Error("Could not Fetch data");return e.json()})).then((function(t){e.setState({posts:t}),e.setState({isLoading:!1}),e.setState({isError:!1})})).catch((function(t){"AbortError"===t.name?console.log("Fetch Aborted"):(console.log(t.message),e.setState({isError:t.message}))}))}},{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){var e=this.context,t=e.isLoggedIn,s=e.profile_id;return Object(b.jsxs)("div",{className:"home",children:[t&&Object(b.jsxs)("h2",{children:["Welcome Back, ",s]}),Object(b.jsx)("h1",{children:"Home Page"}),!this.state.isError&&this.state.isLoading&&Object(b.jsx)("div",{children:"Loading...."}),this.state.isError&&Object(b.jsx)("div",{children:Object(b.jsx)("h2",{style:{color:"#ff003cf0"},children:this.state.isError})}),this.state.posts&&Object(b.jsx)(x,{posts:this.state.posts,title:"All Posts"}),s&&this.state.posts&&Object(b.jsx)(x,{posts:this.state.posts.filter((function(e){return e.author_id===s})),title:"My Posts"})]})}}]),s}(r.Component);P.contextType=u;var T=P,A=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={hasError:!1},r}return Object(j.a)(s,[{key:"componentDidCatch",value:function(e,t){console.log(e),console.log(t)}},{key:"render",value:function(){return this.state.hasError?Object(b.jsx)("h1",{children:"Something Went Wrong"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),s}(r.Component);var F=function(){return Object(b.jsx)(i.a,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(O,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(A,{children:Object(b.jsxs)(v.c,{children:[Object(b.jsx)(v.a,{exact:!0,path:"/react-blog-test-v2",children:Object(b.jsx)(g,{})}),Object(b.jsx)(v.a,{path:"/login",children:Object(b.jsx)(E,{})}),Object(b.jsx)(v.a,{path:"/register",children:Object(b.jsx)(S,{})}),Object(b.jsx)(v.a,{path:"/create",children:Object(b.jsx)(k,{})}),Object(b.jsx)(v.a,{exact:!0,path:"/profile/:id",children:Object(b.jsx)(w,{})}),Object(b.jsx)(v.a,{exact:!0,path:"/profile",children:Object(b.jsx)(C,{})}),Object(b.jsx)(v.a,{path:"/posts/:id",children:Object(b.jsx)(y,{})}),Object(b.jsx)(v.a,{path:"/new-home",children:Object(b.jsx)(T,{})}),Object(b.jsx)(v.a,{path:"*",children:Object(b.jsx)(N,{})})]})})})]})})})},_=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,37)).then((function(t){var s=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,o=t.getTTFB;s(e),r(e),c(e),n(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(F,{})}),document.getElementById("root")),_()}},[[36,1,2]]]);
//# sourceMappingURL=main.b669ea9c.chunk.js.map