(this["webpackJsonpsocial-media"]=this["webpackJsonpsocial-media"]||[]).push([[0],{21:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){},36:function(e,t,s){"use strict";s.r(t);var c=s(1),r=s.n(c),n=s(22),o=s.n(n),a=(s(28),s(29),s(2)),i=s(19),l=s(10),j=s(11),d=s(13),h=s(12),b=s(0),u=Object(c.createContext)(),O=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var c=arguments.length,r=new Array(c),n=0;n<c;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedIn:!1,profile_id:null,accessToken:null},e.LoggedIn=function(t){e.setState({isLoggedIn:!0,profile_id:t})},e.Loggout=function(){e.setState({isLoggedIn:!1,profile_id:null,accessToken:null})},e.SetAccessToken=function(t,s){e.setState({isLoggedIn:!0,profile_id:s,accessToken:t})},e}return Object(j.a)(s,[{key:"render",value:function(){return Object(b.jsx)(u.Provider,{value:Object(i.a)(Object(i.a)({},this.state),{},{LoggedIn:this.LoggedIn,Loggout:this.Loggout,SetAccessToken:this.SetAccessToken}),children:this.props.children})}}]),s}(c.Component),p=function(){var e=Object(c.useContext)(u),t=e.profile_id,s=e.isLoggedIn,r=e.Loggout;return Object(b.jsxs)("nav",{className:"navbar",children:[Object(b.jsx)(a.b,{to:"/react-blog-test-v2",children:Object(b.jsx)("h1",{children:"The Social Media App"})}),Object(b.jsxs)("div",{className:"links",children:[Object(b.jsx)(a.b,{to:"/react-blog-test-v2",children:"Home"}),Object(b.jsx)(a.b,{to:"/profile",children:"Profile"}),Object(b.jsx)(a.b,{to:"/",children:"About"}),s&&Object(b.jsx)(a.b,{to:"/create",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"New Post"}),!s&&Object(b.jsx)(a.b,{to:"/login",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},children:"Login"}),t&&Object(b.jsx)(a.b,{to:"#",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px"},onClick:r,children:"Logout"})]})]})},f=function(e){var t=e.posts,s=e.title;return Object(b.jsxs)("div",{className:"post-list",children:[Object(b.jsx)("h2",{children:s}),t.map((function(e){return Object(b.jsx)(a.b,{to:"/posts/".concat(e.id),children:Object(b.jsxs)("div",{className:"post-preview",children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsx)("p",{children:e.body}),Object(b.jsxs)("p",{children:["by ",Object(b.jsx)(a.b,{to:"/profile/".concat(e.author_id),className:"link-highlight",children:e.author})]})]})},e.id)}))]})},x=s(4),g=function(e,t){var s=Object(c.useState)(null),r=Object(x.a)(s,2),n=r[0],o=r[1],a=Object(c.useState)(!0),i=Object(x.a)(a,2),l=i[0],j=i[1],d=Object(c.useState)(null),h=Object(x.a)(d,2),b=h[0],u=h[1];return Object(c.useEffect)((function(){var s=new AbortController;return fetch(e,{signal:s.signal},t).then((function(e){if(!e.ok)throw Error("Could not Fetch data");return e.json()})).then((function(e){o(e),j(!1),u(null)})).catch((function(e){"AbortError"===e.name?console.log("Fetch Aborted"):(console.log(e.message),u(e.message))})),function(){return s.abort()}}),[e,t]),{data:n,isLoading:l,isError:b}},m=function(){var e=g("https://backend-react-json-server.herokuapp.com/posts"),t=e.data,s=e.isLoading,c=e.isError;return Object(b.jsxs)("div",{className:"Home",children:[Object(b.jsxs)("div",{className:"moved-out",style:{marginBottom:"1rem"},children:[Object(b.jsx)("h2",{style:{color:"#ff003cf0",margin:"1rem"},children:"This Page is Depreciated"}),Object(b.jsx)(a.b,{to:"/react-blog-test-v2",className:"link-highlight",children:"Click Here "}),"to Move to New Home Page"]}),!c&&s&&Object(b.jsx)("div",{children:"Loading...."}),c&&Object(b.jsx)("div",{children:Object(b.jsx)("h2",{style:{color:"#ff003cf0"},children:c})}),t&&Object(b.jsx)(f,{posts:t,title:"All Posts"}),t&&Object(b.jsx)(f,{posts:t.filter((function(e){return"bruce"===e.author})),title:"My Posts"})]})},v=s(3),k=function(){var e=Object(c.useContext)(u).profile_id,t=Object(c.useState)(""),s=Object(x.a)(t,2),r=s[0],n=s[1],o=Object(c.useState)(""),a=Object(x.a)(o,2),i=a[0],l=a[1],j=Object(c.useState)(""),d=Object(x.a)(j,2),h=d[0],O=d[1],p=Object(c.useState)(!1),f=Object(x.a)(p,2),g=f[0],m=f[1],k=Object(v.f)(),y=Object(c.useRef)();Object(c.useEffect)((function(){y.current.focus()}),[y]);return Object(b.jsxs)("div",{className:"create",children:[Object(b.jsx)("h2",{children:"New Post"}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var s={title:r,body:i,author:h,author_id:e};m(!0);var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};fetch("https://backend-react-json-server.herokuapp.com/posts",c).then((function(e){if(201!==e.status)throw Error(e.statusText);console.log("Posted"),m(!1),k.push("/react-blog-test-v2")})).catch((function(e){console.log(e.message),m(!1)}))},children:[Object(b.jsx)("label",{children:"Post Title : "}),Object(b.jsx)("input",{type:"text",required:!0,value:r,onChange:function(e){return n(e.target.value)},ref:y}),Object(b.jsx)("label",{children:"Post Body : "}),Object(b.jsx)("textarea",{value:i,onChange:function(e){return l(e.target.value)},required:!0}),Object(b.jsx)("label",{children:"Author Name : "}),Object(b.jsx)("input",{value:h,onChange:function(e){return O(e.target.value)},type:"text",required:!0}),e&&!g&&Object(b.jsx)("button",{type:"submit",children:"Post"}),g&&Object(b.jsx)("button",{disabled:!0,children:"Please Wait..."}),!e&&Object(b.jsx)("h2",{className:"error",children:"Login to Post"})]})]})},y=function(){var e=Object(v.g)().id,t=g("https://backend-react-json-server.herokuapp.com/posts/"+e,{method:"GET",redirect:"follow"}),s=t.data,c=t.isError,r=t.isLoading,n=Object(v.f)();return Object(b.jsxs)("div",{className:"post-details",children:[!c&&r&&Object(b.jsx)("div",{children:"Loading Post..."}),c&&Object(b.jsxs)("div",{children:[c,"!!",Object(b.jsx)("br",{}),"Post not found"]}),s&&Object(b.jsxs)("article",{children:[Object(b.jsx)("h2",{children:s.title}),Object(b.jsxs)("p",{children:["posted by ",Object(b.jsx)(a.b,{className:"link-highlight",to:"/profile/".concat(s.author_id),children:s.author})]}),Object(b.jsx)("div",{children:s.body}),Object(b.jsx)("button",{onClick:function(){fetch("https://backend-react-json-server.herokuapp.com/posts/"+s.id,{method:"DELETE"}).then((function(){n.push("/react-blog-test-v2")})).catch((function(e){console.log(e)}))},children:"Delete"})]})]})},N=function(){return Object(b.jsxs)("div",{className:"not-found",children:[Object(b.jsx)("h2",{children:"Broken Link"}),Object(b.jsx)("p",{children:"The Page you requested not found"}),Object(b.jsx)(a.b,{to:"/react-blog-test-v2",children:"Home"})]})};var w=function(){var e=Object(c.useContext)(u),t=e.profile_id,s=e.accessToken,r=Object(c.useContext)(u),n=new Headers;n.append("Authorization","Bearer "+s);var o={method:"GET",redirect:"follow",headers:n},i=g("https://backend-react-json-server.herokuapp.com/profile/"+r.profile_id,o),l=i.data,j=i.isError,d=i.isLoading;return Object(b.jsxs)("div",{children:[!t&&Object(b.jsx)("h1",{children:Object(b.jsx)(a.b,{to:"/login",className:"link-highlight",children:"Please Login"})}),t&&j&&Object(b.jsx)("h2",{children:"Error Occured"}),t&&d&&Object(b.jsx)("h2",{children:"Loading!!..."}),Object(b.jsx)("h2",{children:"Profile"}),t&&Object(b.jsxs)("div",{className:"profile-container",children:[Object(b.jsxs)("p",{children:[" Name : ",!j&&l&&l.name]}),Object(b.jsx)("p",{children:" Status : "})]})]})},S=function(){var e=Object(v.g)().id,t=g("https://backend-react-json-server.herokuapp.com/profile/"+e,{method:"GET",redirect:"follow"}),s=t.data,c=t.isError,r=t.isLoading;return Object(b.jsxs)("div",{className:"profile-container",children:[!c&&r&&Object(b.jsx)("div",{children:"Loading Profile..."}),c&&Object(b.jsxs)("div",{children:[c,"!!",Object(b.jsx)("br",{}),"Profile not found"]}),s&&Object(b.jsxs)("div",{className:"profile-data",children:[Object(b.jsxs)("h2",{children:["Name : ",s.name]}),Object(b.jsxs)("p",{children:["Email : ",s.email]})]})]})},C=s.p+"static/media/login.103b30a1.svg",L=(s(21),function(){var e=Object(c.useContext)(u),t=e.isLoggedIn,s=e.SetAccessToken,r=Object(c.useState)(""),n=Object(x.a)(r,2),o=n[0],i=n[1],l=Object(c.useState)(""),j=Object(x.a)(l,2),d=j[0],h=j[1],O=Object(c.useState)(!1),p=Object(x.a)(O,2),f=p[0],g=p[1],m=Object(c.useState)(!1),v=Object(x.a)(m,2),k=v[0],y=v[1];return Object(b.jsxs)("div",{className:"base-container",children:[Object(b.jsx)("div",{className:"header",children:"Login"}),!t&&Object(b.jsxs)("div",{className:"content",children:[k&&Object(b.jsx)("h2",{className:"error",children:"Invalid Username or Password"}),Object(b.jsx)("div",{className:"image",children:Object(b.jsx)("img",{src:C,alt:"just a decoration"})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:o,password:d};g(!0);var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("https://backend-react-json-server-auth.herokuapp.com/auth/login",c).then((function(e){if(401===e.status&&y(!0),200!==e.status)throw Error(e.statusText);return console.log("Verified successfully"),e.json()})).then((function(e){s(e.access_token,e.id),console.log("Logged In successfully")})).catch((function(e){console.log(e.message),g(!1)}))},children:[Object(b.jsxs)("div",{className:"form",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password",value:d,onChange:function(e){return h(e.target.value)}})]})]}),!t&&!f&&Object(b.jsx)("button",{type:"submit",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px",width:"7rem",height:"3rem"},children:"Login"})]}),Object(b.jsx)(a.b,{to:"/register",style:{color:"#333",marginTop:"1rem",fontSize:"1.2rem"},children:"Don't Have an account?? Register!!"})]}),t&&Object(b.jsx)("h2",{style:{margin:"1rem"},children:"You are already Logged In"})]})}),E=function(){var e=Object(c.useContext)(u),t=e.isLoggedIn,s=e.SetAccessToken,r=Object(c.useState)(""),n=Object(x.a)(r,2),o=n[0],a=n[1],i=Object(c.useState)(""),l=Object(x.a)(i,2),j=l[0],d=l[1],h=Object(c.useState)(""),O=Object(x.a)(h,2),p=O[0],f=O[1],g=Object(c.useState)(!1),m=Object(x.a)(g,2),k=m[0],y=m[1],N=Object(v.f)();return Object(b.jsxs)("div",{className:"base-container",children:[Object(b.jsx)("div",{className:"header",children:Object(b.jsx)("h2",{children:"Register"})}),!t&&Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("div",{className:"image",children:Object(b.jsx)("img",{src:C,alt:"just a decoration"})}),Object(b.jsxs)("form",{onSubmit:function(e){var t=!1,c=null;e.preventDefault();var r={name:o,email:j,password:p},n={email:j,password:p};y(!0);var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},i="https://backend-react-json-server-auth.herokuapp.com/auth/register";fetch(i,a).then((function(e){if(200!==e.status)throw t=!0,Error(e.statusText);return console.log("New User Added"),e.json()})).then((function(e){if(c=e.access_token,!t){var n=new Headers;n.append("Authorization","Bearer "+c),a={method:"POST",headers:n,body:JSON.stringify(r)},i="https://backend-react-json-server-auth.herokuapp.com/profile/",fetch(i,a).then((function(e){if(201!==e.status)throw Error(e.statusText);return console.log("New Profile Added"),y(!1),e.json()})).then((function(e){s(c,e.id),console.log("Registered Successfully"),N.push("/react-blog-test-v2")})).catch((function(e){console.log(e.message),y(!1)}))}})).catch((function(e){console.log(e.message),y(!1)}))},children:[Object(b.jsxs)("div",{className:"form",children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"username",children:"Username"}),Object(b.jsx)("input",{type:"text",name:"username",placeholder:"username",value:o,onChange:function(e){return a(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email"}),Object(b.jsx)("input",{type:"email",name:"email",placeholder:"email",value:j,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"password",value:p,onChange:function(e){return f(e.target.value)},required:!0})]})]}),!t&&!k&&Object(b.jsx)("button",{type:"submit",style:{color:"white",backgroundColor:"#f1356d",borderRadius:"8px",width:"7rem",height:"3rem",borderBlockColor:"pinks"},children:"Register"})]})]}),t&&Object(b.jsx)("h1",{children:"You already have an account!! You Are Logged In"})]})},P=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var c;return Object(l.a)(this,s),(c=t.call(this,e)).abortController=new window.AbortController,c.state={posts:[],isLoading:!0,isError:null},c}return Object(j.a)(s,[{key:"fetchPosts",value:function(){var e=this;fetch("https://backend-react-json-server.herokuapp.com/posts",{signal:this.abortController.signal},{method:"GET",redirect:"follow"}).then((function(e){if(!e.ok)throw Error("Could not Fetch data");return e.json()})).then((function(t){e.setState({posts:t}),e.setState({isLoading:!1}),e.setState({isError:!1})})).catch((function(t){"AbortError"===t.name?console.log("Fetch Aborted"):(console.log(t.message),e.setState({isError:t.message}))}))}},{key:"componentDidMount",value:function(){this.fetchPosts()}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){var e=this.context,t=e.isLoggedIn,s=e.profile_id;return Object(b.jsxs)("div",{className:"home",children:[t&&Object(b.jsx)("h2",{children:"Welcome Back"}),Object(b.jsx)("h1",{children:"Home Page"}),!this.state.isError&&this.state.isLoading&&Object(b.jsx)("div",{children:"Loading...."}),this.state.isError&&Object(b.jsx)("div",{children:Object(b.jsx)("h2",{style:{color:"#ff003cf0"},children:this.state.isError})}),this.state.posts&&Object(b.jsx)(f,{posts:this.state.posts,title:"All Posts"}),s&&this.state.posts&&Object(b.jsx)(f,{posts:this.state.posts.filter((function(e){return e.author_id===s})),title:"My Posts"})]})}}]),s}(c.Component);P.contextType=u;var T=P,A=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var c;return Object(l.a)(this,s),(c=t.call(this,e)).state={hasError:!1},c}return Object(j.a)(s,[{key:"componentDidCatch",value:function(e,t){console.log(e),console.log(t)}},{key:"render",value:function(){return this.state.hasError?Object(b.jsx)("h1",{children:"Something Went Wrong"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),s}(c.Component);var I=function(){return Object(b.jsx)(a.a,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(O,{children:[Object(b.jsx)(p,{}),Object(b.jsx)("div",{className:"content",children:Object(b.jsx)(A,{children:Object(b.jsxs)(v.c,{children:[Object(b.jsx)(v.a,{exact:!0,path:"/",children:Object(b.jsx)(m,{})}),Object(b.jsx)(v.a,{exact:!0,path:"/react-blog-test-v2",children:Object(b.jsx)(T,{})}),Object(b.jsx)(v.a,{path:"/login",children:Object(b.jsx)(L,{})}),Object(b.jsx)(v.a,{path:"/register",children:Object(b.jsx)(E,{})}),Object(b.jsx)(v.a,{path:"/create",children:Object(b.jsx)(k,{})}),Object(b.jsx)(v.a,{exact:!0,path:"/profile/:id",children:Object(b.jsx)(S,{})}),Object(b.jsx)(v.a,{exact:!0,path:"/profile",children:Object(b.jsx)(w,{})}),Object(b.jsx)(v.a,{path:"/posts/:id",children:Object(b.jsx)(y,{})}),Object(b.jsx)(v.a,{path:"/new-home",children:Object(b.jsx)(T,{})}),Object(b.jsx)(v.a,{path:"*",children:Object(b.jsx)(N,{})})]})})})]})})})},_=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,37)).then((function(t){var s=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,o=t.getTTFB;s(e),c(e),r(e),n(e),o(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(I,{})}),document.getElementById("root")),_()}},[[36,1,2]]]);
//# sourceMappingURL=main.8bcc6e87.chunk.js.map